(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{123:function(t,e,n){},128:function(t,e,n){"use strict";n.r(e);var r,c,a=n(0),o=n.n(a),u=n(18),s=n.n(u),i=n(58),b=n(59),j=n(61),l=n(60),d=n(8),O=n(7),f=n(3),h=n(4),g=n(20),p=O.a.registerRequest,x=O.a.registerSuccess,C=O.a.registerError,v=O.a.logoutRequest,m=O.a.logoutSuccess,k=O.a.logoutError,S=O.a.loginRequest,y=O.a.loginSuccess,E=O.a.loginError,R=O.a.getCurrentUserRequest,q=O.a.getCurrentUserSuccess,w=O.a.getCurrentUserError,U=g.a.fetchContactsRequest,_=g.a.fetchContactsSuccess,N=g.a.fetchContactsError,A=g.a.addContactRequest,L=g.a.addContactSuccess,M=g.a.addContactError,F=g.a.deleteContactRequest,I=g.a.deleteContactSuccess,T=g.a.deleteContactError,z=Object(h.c)(!1,(r={},Object(f.a)(r,p,(function(){return!0})),Object(f.a)(r,x,(function(){return!1})),Object(f.a)(r,C,(function(){return!1})),Object(f.a)(r,v,(function(){return!0})),Object(f.a)(r,m,(function(){return!1})),Object(f.a)(r,k,(function(){return!1})),Object(f.a)(r,S,(function(){return!0})),Object(f.a)(r,y,(function(){return!1})),Object(f.a)(r,E,(function(){return!1})),Object(f.a)(r,R,(function(){return!0})),Object(f.a)(r,q,(function(){return!1})),Object(f.a)(r,w,(function(){return!1})),Object(f.a)(r,U,(function(){return!0})),Object(f.a)(r,_,(function(){return!1})),Object(f.a)(r,N,(function(){return!1})),Object(f.a)(r,A,(function(){return!0})),Object(f.a)(r,L,(function(){return!1})),Object(f.a)(r,M,(function(){return!1})),Object(f.a)(r,F,(function(){return!0})),Object(f.a)(r,I,(function(){return!1})),Object(f.a)(r,T,(function(){return!1})),r)),P={getIsLoading:function(t){return t.loading}},G=n(15),W={register:"/register",login:"/login",contacts:"/contacts"},B=n(33),J=n(24),D=n(29),H=n(54),Q=n.n(H),V=n(2),Z=function(t){return Object(V.jsx)(D.b,Object(J.a)({className:Q.a.navLink,activeClassName:Q.a.activeNavLink},t))},K=n(75),X=n.n(K),Y=n(148),$=n(153),tt=Object($.a)(Y.a)({padding:"0"}),et=Object(G.b)((function(t){return{isAuthenticated:O.d.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(V.jsx)("nav",{children:e&&Object(V.jsx)(tt,{className:X.a.btn,children:Object(V.jsx)(Z,{to:"/contacts",exact:!0,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})})})})),nt=n(76),rt=n.n(nt),ct=Object($.a)(Y.a)({padding:"0"}),at=function(){return Object(V.jsxs)("div",{className:rt.a.authNav,children:[Object(V.jsx)(ct,{children:Object(V.jsx)(Z,{to:"/register",exact:!0,children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})}),Object(V.jsx)(ct,{children:Object(V.jsx)(Z,{to:"/login",exact:!0,children:"\u0412\u0445\u0456\u0434"})})]})},ot=n.p+"static/media/avatar.e7012cd6.png",ut=n(46),st=n.n(ut),it=n(155),bt=Object($.a)(it.a)({width:"32px",height:"32px",marginRight:"10px"}),jt={onLogout:O.b.logout},lt=Object(G.b)((function(t){return{name:O.d.getUserName(t),avatar:ot}}),jt)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(V.jsxs)("div",{className:st.a.userMenu,children:[Object(V.jsx)(bt,{className:st.a.avatar,src:e,alt:"",width:"32"}),Object(V.jsxs)("span",{className:st.a.name,children:["Welcome, ",n]}),Object(V.jsx)(Y.a,{type:"button",onClick:r,children:"Logout"})]})})),dt=n(151),Ot=n(150),ft=Object($.a)(Ot.a)({justifyContent:"space-between",backgroundColor:"green"}),ht=Object(G.b)((function(t){return{isAuthenticated:O.d.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(V.jsx)(dt.a,{children:Object(V.jsxs)(ft,{children:[Object(V.jsx)(et,{}),e?Object(V.jsx)(lt,{}):Object(V.jsx)(at,{})]})})})),gt=n(45),pt=Object(G.b)((function(t){return{isAuthenticated:O.d.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(gt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(V.jsx)(d.b,Object(J.a)(Object(J.a)({},c),{},{render:function(t){return n?Object(V.jsx)(e,Object(J.a)({},t)):Object(V.jsx)(d.a,{to:r})}}))})),xt=Object(G.b)((function(t){return{isAuthenticated:O.d.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(gt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(V.jsx)(d.b,Object(J.a)(Object(J.a)({},c),{},{render:function(t){return n&&c.restricted?Object(V.jsx)(d.a,{to:r}):Object(V.jsx)(e,Object(J.a)({},t))}}))})),Ct=n(77),vt=n.n(Ct),mt=function(t){var e=t.children;return Object(V.jsx)("div",{className:vt.a.container,children:e})},kt=n(78),St=n(79),yt=n.n(St),Et=document.querySelector("#modal-root"),Rt=function(t){var e=t.children;return Object(u.createPortal)(Object(V.jsx)("div",{className:yt.a.Overlay,children:Object(V.jsx)("div",{children:e})}),Et)},qt=n(80),wt=n.n(qt),Ut=n(52),_t=function(){return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(Rt,{children:Object(V.jsx)(wt.a,{css:Object(Ut.css)(c||(c=Object(kt.a)(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  "]))),size:20,color:"olive"})})})},Nt=(n(122),Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(1)]).then(n.bind(null,192))}))),At=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,193))})),Lt=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,194))})),Mt=function(t){Object(j.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ht,{}),Object(V.jsxs)(mt,{children:[Object(V.jsx)(a.Suspense,{fallback:Object(V.jsx)(_t,{}),children:Object(V.jsxs)(d.d,{children:[Object(V.jsx)(d.b,{exact:!0,path:"/",children:Object(V.jsx)(d.a,{to:W.login})}),Object(V.jsx)(pt,{path:W.contacts,component:Nt,redirectTo:W.login}),Object(V.jsx)(xt,{path:W.login,restricted:!0,redirectTo:W.contacts,component:At}),Object(V.jsx)(xt,{path:W.register,restricted:!0,redirectTo:W.contacts,component:Lt})]})}),Object(V.jsx)(B.a,{position:"top-center",autoClose:3e3,newestOnTop:!0,limit:3,transition:B.b})]}),this.props.isLoading&&Object(V.jsx)(_t,{})]})}}]),n}(a.Component),Ft={onGetCurrentUser:O.b.getCurrentUser},It=Object(G.b)((function(t){return{isLoading:P.getIsLoading(t)}}),Ft)(Mt),Tt=(n(123),n(124),n(44)),zt=n(28),Pt=n(81),Gt=n.n(Pt),Wt=Object(Tt.a)(Object(h.d)({serializableCheck:{ignoredActions:[zt.a,zt.f,zt.b,zt.c,zt.d,zt.e]}})),Bt={key:"token",storage:Gt.a,whitelist:["token"]},Jt=Object(h.a)({reducer:{contacts:g.c,auth:Object(zt.g)(Bt,O.c),loading:z},middleware:Wt,devTools:!1}),Dt={store:Jt,persistor:Object(zt.h)(Jt)},Ht=n(82);n(127);s.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(G.a,{store:Dt.store,children:Object(V.jsx)(Ht.a,{loading:null,persistor:Dt.persistor,children:Object(V.jsx)(D.a,{children:Object(V.jsx)(It,{})})})})}),document.getElementById("root"))},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return q})),n.d(e,"c",(function(){return B})),n.d(e,"d",(function(){return Q}));var r,c,a,o=n(4),u=Object(o.b)("contacts/fetchContactsRequest"),s=Object(o.b)("contacts/fetchContactsSuccess"),i=Object(o.b)("contacts/fetchContactsError"),b=Object(o.b)("contacts/addContactRequest"),j=Object(o.b)("contacts/addContactSuccess"),l=Object(o.b)("contacts/addContactError"),d=Object(o.b)("contacts/deleteContactRequest"),O=Object(o.b)("contacts/deleteContactSuccess"),f=Object(o.b)("contacts/deleteContactError"),h={changeFilter:Object(o.b)("contacts/changeFilter"),resetFilter:Object(o.b)("contscts/resetFilter"),fetchContactsRequest:u,fetchContactsSuccess:s,fetchContactsError:i,addContactRequest:b,addContactSuccess:j,addContactError:l,deleteContactRequest:d,deleteContactSuccess:O,deleteContactError:f},g=n(21),p=n.n(g),x=h.fetchContactsRequest,C=h.fetchContactsSuccess,v=h.fetchContactsError,m=h.addContactRequest,k=h.addContactSuccess,S=h.addContactError,y=h.deleteContactRequest,E=h.deleteContactSuccess,R=h.deleteContactError,q={addContact:function(t){return function(e){e(m()),p.a.post("/contacts",t).then((function(t){var n=t.data;return e(k(n))})).catch((function(t){return e(S(t.message))}))}},deleteContact:function(t){return function(e){e(y()),p.a.delete("/contacts/".concat(t)).then((function(){return e(E(t))})).catch((function(t){return e(R(t.message))}))}},fetchContacts:function(){return function(t){t(x()),p.a.get("/contacts").then((function(e){var n=e.data;return t(C(n))})).catch((function(e){return t(v(e.message))}))}}},w=n(3),U=n(44),_=n(12),N=h.fetchContactsSuccess,A=h.fetchContactsError,L=h.addContactSuccess,M=h.addContactError,F=h.deleteContactSuccess,I=h.deleteContactError,T=h.changeFilter,z=h.resetFilter,P=Object(o.c)([],(r={},Object(w.a)(r,N,(function(t,e){return e.payload})),Object(w.a)(r,L,(function(t,e){return[e.payload].concat(Object(U.a)(t))})),Object(w.a)(r,F,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),G=Object(o.c)("",(c={},Object(w.a)(c,T,(function(t,e){return e.payload})),Object(w.a)(c,z,(function(){return""})),c)),W=Object(o.c)(null,(a={},Object(w.a)(a,A,(function(t,e){return e.payload})),Object(w.a)(a,M,(function(t,e){return e.payload})),Object(w.a)(a,I,(function(t,e){return e.payload})),a)),B=Object(_.c)({items:P,filter:G,error:W}),J=n(40),D=function(t){return t.contacts.items},H=function(t){return t.contacts.filter},Q={getItems:D,getFilter:H,filteredItems:Object(J.a)([H,D],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))}))}},46:function(t,e,n){t.exports={userMenu:"UserMenu_userMenu__1whAZ",name:"UserMenu_name__GNFMg"}},49:function(t,e,n){"use strict";var r=n(33);e.a=function(t){return r.c.error(t)}},54:function(t,e,n){t.exports={navLink:"MyNavLink_navLink__2rQ_U",activeNavLink:"MyNavLink_activeNavLink__3mjgz"}},7:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return X})),n.d(e,"d",(function(){return Y}));var r=n(4),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),loginRequest:u,loginSuccess:s,loginError:i,getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")},j=n(27),l=n.n(j),d=n(37),O=n(21),f=n.n(O),h=n(49),g=b.registerRequest,p=b.registerSuccess,x=b.registerError,C=b.logoutRequest,v=b.logoutSuccess,m=b.logoutError,k=b.loginRequest,S=b.loginSuccess,y=b.loginError,E=b.getCurrentUserRequest,R=b.getCurrentUserSuccess,q=b.getCurrentUserError;f.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var w,U,_,N,A=function(t){f.a.defaults.headers.common.Authorization="Bearer ".concat(t)},L=function(){f.a.defaults.headers.common.Authorization=""},M={register:function(t){return function(){var e=Object(d.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(g()),e.prev=1,e.next=4,f.a.post("/users/signup",t);case 4:r=e.sent,c=r.data,A(c.token),n(p(c)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Object(h.a)("Wrong email or password"),n(x(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},login:function(t){return function(){var e=Object(d.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(k()),e.prev=1,e.next=4,f.a.post("/users/login",t);case 4:r=e.sent,c=r.data,A(c.token),n(S(c)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Object(h.a)("Wrong email or password"),n(y(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logout:function(){return function(){var t=Object(d.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(C()),t.prev=1,t.next=4,f.a.post("/users/logout");case 4:L(),e(v()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(m(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(d.a)(l.a.mark((function t(e,n){var r,c,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return A(c),e(E()),t.prev=5,t.next=8,f.a.get("/users/current");case 8:a=t.sent,o=a.data,e(R(o)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(q(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}},F=n(3),I=n(12),T=b.registerSuccess,z=b.registerError,P=b.logoutSuccess,G=b.logoutError,W=b.loginSuccess,B=b.loginError,J=b.getCurrentUserSuccess,D=b.getCurrentUserError,H={name:null,email:null},Q=Object(r.c)(H,(w={},Object(F.a)(w,T,(function(t,e){return e.payload.user})),Object(F.a)(w,W,(function(t,e){return e.payload.user})),Object(F.a)(w,P,(function(){return H})),Object(F.a)(w,J,(function(t,e){return e.payload})),w)),V=Object(r.c)(null,(U={},Object(F.a)(U,T,(function(t,e){return e.payload.token})),Object(F.a)(U,W,(function(t,e){return e.payload.token})),Object(F.a)(U,P,(function(){return null})),U)),Z=Object(r.c)(null,(_={},Object(F.a)(_,z,(function(t,e){return e.payload})),Object(F.a)(_,B,(function(t,e){return e.payload})),Object(F.a)(_,G,(function(t,e){return e.payload})),Object(F.a)(_,D,(function(t,e){return e.payload})),_)),K=Object(r.c)(!1,(N={},Object(F.a)(N,T,(function(){return!0})),Object(F.a)(N,W,(function(){return!0})),Object(F.a)(N,J,(function(){return!0})),Object(F.a)(N,z,(function(){return!1})),Object(F.a)(N,B,(function(){return!1})),Object(F.a)(N,D,(function(){return!1})),Object(F.a)(N,P,(function(){return!1})),N)),X=Object(I.c)({user:Q,token:V,error:Z,isAuthenticated:K}),Y={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name}}},75:function(t,e,n){t.exports={btn:"Navigation_btn__3VhmU"}},76:function(t,e,n){t.exports={authNav:"AuthNav_authNav__2CwfN"}},77:function(t,e,n){t.exports={container:"Container_container__vwHoR"}},79:function(t,e,n){t.exports={Overlay:"Modal_Overlay__378v2"}}},[[128,5,6]]]);
//# sourceMappingURL=main.17a4196b.chunk.js.map